language: python
python:
- '2.7'
sudo: false
cache:
  directories:
  - "~/.platformio"
install:
- pip install -U platformio
- platformio lib install
script:
- platformio run
before_deploy:
- "./.prepare_release"
deploy:
  provider: releases
  prerelease: true
  api_key:
    secure: LIUQnjkzZw8Kml3GHVCBI8p1DUBiCAi7wYNCEfYy3jsfmzxwkUxCqRVjRyz8Zig1dAsed82kpYc7mquk3f5dyZ93X4W9ydeGNHyFkx2tLXI3bmBHNW4cfJ/027fsRL9XKwU0KCy1saM15Ld+IwB6RLknPTR8zKkvGTV3wiE5p+zM1lmZklwk1H84GvoBi/jwWsiCsp95XiWJMlHo1FJsj4jn6lInRtqwJTOn7jSsBXDBI90U1t7Y0bLqkp2Ho5f6Q065ywvPIaX/jDcE7FWqkhTAIFRKJl/t/iz8rHib/Ymy7NnLWd8FaZN/MMnVd9DYMyYkoE6Kibigl6IgIdvY3L5f2XKjsFwjq0Yuttkca6gVmcXVBKvi5lclgGMx7WLuODgqOS1vR0wfcWNU32DrW3W2nP+Yu/TLc13GxcFd3FGr0llbgLGSTitNk6T4suLlSBEIk2XJHmM5b+CnmLSudQ7XmQE90IbLbUUVphS1yr2+cpMyMIyaW7xyWzgkon3zl36xPAh1rP0wpxiCnxqILAb/tSmKb2pNlIUO6EK5EqjLL2JikX3r5AbsP/OUBmi1OOK4PWgWwNd00v3m+nuM2GFCaJuwX6FHYD7lW1a1kyxL2Og3++eYxJ9cPOH/BfwkzJGtC38yJJ8arhhM50FgEMSoLpWDozj93X3i1/yNBJg=
  file_glob: true
  skip_cleanup: true
  file: dist/*.bin
  on:
    repo: sidoh/esp8266_thermometer
    tags: true
